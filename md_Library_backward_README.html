<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>R-Type: Backward-cpp &lt;a href=&quot;http://www.conan.io/source/backward/1.3.0/Manu343726/testing&quot;&gt;&lt;img src=&quot;https://img.shields.io/badge/conan.io-backward%2F1.3.0-green.svg?logo=data:image/png;base64%2CiVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAMAAAAolt3jAAAA1VBMVEUAAABhlctjlstkl8tlmMtlmMxlmcxmmcxnmsxpnMxpnM1qnc1sn85voM91oM11oc1xotB2oc56pNF6pNJ2ptJ8ptJ8ptN9ptN8p9N5qNJ9p9N9p9R8qtOBqdSAqtOAqtR%2BrNSCrNJ/rdWDrNWCsNWCsNaJs9eLs9iRvNuVvdyVv9yXwd2Zwt6axN6dxt%2Bfx%2BChyeGiyuGjyuCjyuGly%2BGlzOKmzOGozuKoz%2BKqz%2BOq0OOv1OWw1OWw1eWx1eWy1uay1%2Baz1%2Baz1%2Bez2Oe02Oe12ee22ujUGwH3AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfgBQkREyOxFIh/AAAAiklEQVQI12NgAAMbOwY4sLZ2NtQ1coVKWNvoc/Eq8XDr2wB5Ig62ekza9vaOqpK2TpoMzOxaFtwqZua2Bm4makIM7OzMAjoaCqYuxooSUqJALjs7o4yVpbowvzSUy87KqSwmxQfnsrPISyFzWeWAXCkpMaBVIC4bmCsOdgiUKwh3JojLgAQ4ZCE0AMm2D29tZwe6AAAAAElFTkSuQmCC&quot; alt=&quot;badge&quot;/&gt;&lt;/a&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">R-Type
   </div>
   <div id="projectbrief">R-Type project</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_Library_backward_README.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Backward-cpp <a href="http://www.conan.io/source/backward/1.3.0/Manu343726/testing"><object type="image/svg+xml" data="https://img.shields.io/badge/conan.io-backward%2F1.3.0-green.svg?logo=data:image/png;base64%2CiVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAMAAAAolt3jAAAA1VBMVEUAAABhlctjlstkl8tlmMtlmMxlmcxmmcxnmsxpnMxpnM1qnc1sn85voM91oM11oc1xotB2oc56pNF6pNJ2ptJ8ptJ8ptN9ptN8p9N5qNJ9p9N9p9R8qtOBqdSAqtOAqtR%2BrNSCrNJ/rdWDrNWCsNWCsNaJs9eLs9iRvNuVvdyVv9yXwd2Zwt6axN6dxt%2Bfx%2BChyeGiyuGjyuCjyuGly%2BGlzOKmzOGozuKoz%2BKqz%2BOq0OOv1OWw1OWw1eWx1eWy1uay1%2Baz1%2Baz1%2Bez2Oe02Oe12ee22ujUGwH3AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfgBQkREyOxFIh/AAAAiklEQVQI12NgAAMbOwY4sLZ2NtQ1coVKWNvoc/Eq8XDr2wB5Ig62ekza9vaOqpK2TpoMzOxaFtwqZua2Bm4makIM7OzMAjoaCqYuxooSUqJALjs7o4yVpbowvzSUy87KqSwmxQfnsrPISyFzWeWAXCkpMaBVIC4bmCsOdgiUKwh3JojLgAQ4ZCE0AMm2D29tZwe6AAAAAElFTkSuQmCC" style="pointer-events: none;">badge</object></a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Backward is a beautiful stack trace pretty printer for C++.</p>
<p>If you are bored to see this:</p>
<p><img src="doc/rude.png" alt="default trace" class="inline"/></p>
<p>Backward will spice it up for you:</p>
<p><img src="doc/pretty.png" alt="pretty stackstrace" class="inline"/></p>
<p>There is not much to say. Of course it will be able to display the code snippets only if the source files are accessible (else see trace #4 in the example).</p>
<p>All "Source" lines and code snippet prefixed by a pipe "|" are frames inline the next frame. You can see that for the trace #1 in the example, the function <code>you_shall_not_pass()</code> was inlined in the function <code>...read2::do_test()</code> by the compiler.</p>
<h1><a class="anchor" id="autotoc_md68"></a>
Installation</h1>
<h3><a class="anchor" id="autotoc_md69"></a>
Install backward.hpp</h3>
<p>Backward is a header only library. So installing Backward is easy, simply drop a copy of <code><a class="el" href="backward_8hpp_source.html">backward.hpp</a></code> along with your other source files in your C++ project. You can also use a git submodule or really any other way that best fits your environment, as long as you can include <code><a class="el" href="backward_8hpp_source.html">backward.hpp</a></code>.</p>
<h3><a class="anchor" id="autotoc_md70"></a>
Install backward.cpp</h3>
<p>If you want Backward to automatically print a stack trace on most common fatal errors (segfault, abort, un-handled exception...), simply add a copy of <code>backward.cpp</code> to your project, and don't forget to tell your build system.</p>
<p>The code in <code>backward.cpp</code> is trivial anyway, you can simply copy what it's doing at your convenience.</p>
<p>Note for <a href="https://github.com/facebook/folly">folly</a> library users: must define <code><a class="el" href="classbackward_1_1SignalHandling.html">backward::SignalHandling</a> sh;</code> after <code>folly::init(&amp;argc, &amp;argv);</code>.</p>
<h1><a class="anchor" id="autotoc_md71"></a>
Configuration &amp; Dependencies</h1>
<h2><a class="anchor" id="autotoc_md72"></a>
Integration with CMake</h2>
<p>If you are using CMake and want to use its configuration abilities to save you the trouble, you can easily integrate Backward, depending on how you obtained the library.</p>
<h3><a class="anchor" id="autotoc_md73"></a>
With &lt;tt&gt;FetchContent()&lt;/tt&gt;:</h3>
<p>If you are using a recent version of CMake, you can integrate <code>backward</code> via <code>FetchContent</code> like below:</p>
<div class="fragment"><div class="line">include(FetchContent)</div>
<div class="line"> </div>
<div class="line"># Also requires one of: libbfd (gnu binutils), libdwarf, libdw (elfutils)</div>
<div class="line">FetchContent_Declare(backward</div>
<div class="line">        GIT_REPOSITORY https://github.com/bombela/backward-cpp</div>
<div class="line">        GIT_TAG v1.6)</div>
<div class="line">FetchContent_MakeAvailable(backward)</div>
<div class="line"> </div>
<div class="line">file(GLOB_RECURSE SOURCES CONFIGURE_DEPENDS src/*.cpp)</div>
<div class="line">add_executable(example ${SOURCES} ${BACKWARD_ENABLE}) # Notice the &quot;BACKWARD_ENABLE&quot; here</div>
<div class="line">add_backward(example)</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md74"></a>
As a subdirectory:</h3>
<p>In this case you have a subdirectory containing the whole repository of Backward (eg.: using git-submodules), in this case you can do:</p>
<div class="fragment"><div class="line">add_subdirectory(/path/to/backward-cpp)</div>
<div class="line"> </div>
<div class="line"># This will add backward.cpp to your target</div>
<div class="line">add_executable(mytarget mysource.cpp ${BACKWARD_ENABLE})</div>
<div class="line"> </div>
<div class="line"># This will add libraries, definitions and include directories needed by backward</div>
<div class="line"># by setting each property on the target.</div>
<div class="line">add_backward(mytarget)</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md75"></a>
Modifying CMAKE_MODULE_PATH</h3>
<p>In this case you can have Backward installed as a subdirectory:</p>
<div class="fragment"><div class="line">list(APPEND CMAKE_MODULE_PATH /path/to/backward-cpp)</div>
<div class="line">find_package(Backward)</div>
<div class="line"> </div>
<div class="line"># This will add libraries, definitions and include directories needed by backward</div>
<div class="line"># through an IMPORTED target.</div>
<div class="line">target_link_libraries(mytarget PUBLIC Backward::Backward)</div>
</div><!-- fragment --><p>Notice that this is equivalent to using the the approach that uses <code>add_subdirectory()</code>, however it uses cmake's <a href="https://cmake.org/Wiki/CMake/Tutorials/Exporting_and_Importing_Targets">imported target</a> mechanism.</p>
<h3><a class="anchor" id="autotoc_md76"></a>
Installation through a regular package manager</h3>
<p>In this case you have obtained Backward through a package manager.</p>
<p>Packages currently available:</p><ul>
<li><a href="https://anaconda.org/conda-forge/backward-cpp">conda-forge</a></li>
</ul>
<div class="fragment"><div class="line">find_package(Backward)</div>
<div class="line"> </div>
<div class="line"># This will add libraries, definitions and include directories needed by backward</div>
<div class="line"># through an IMPORTED target.</div>
<div class="line">target_link_libraries(mytarget PUBLIC Backward::Backward)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md77"></a>
Libraries to unwind the stack</h2>
<p>On Linux and macOS, backtrace can back-trace or "walk" the stack using the following libraries:</p>
<h3><a class="anchor" id="autotoc_md78"></a>
unwind</h3>
<p>Unwind comes from libgcc, but there is an equivalent inside clang itself. With unwind, the stacktrace is as accurate as it can possibly be, since this is used by the C++ runtine in gcc/clang for stack unwinding on exception.</p>
<p>Normally libgcc is already linked to your program by default.</p>
<h3><a class="anchor" id="autotoc_md79"></a>
libunwind from the &lt;a href="https://github.com/libunwind/libunwind"&gt;libunwind project&lt;/a&gt;</h3>
<pre class="fragment">apt-get install binutils-dev (or equivalent)
</pre><p>Libunwind provides, in some cases, a more accurate stacktrace as it knows to decode signal handler frames and lets us edit the context registers when unwinding, allowing stack traces over bad function references.</p>
<p>For best results make sure you are using libunwind 1.3 or later, which added <code>unw_init_local2</code> and support for handling signal frames.</p>
<p>CMake will warn you when configuring if your libunwind version doesn't support signal frames.</p>
<p>On macOS clang provides a libunwind API compatible library as part of its environment, so no third party libraries are necessary.</p>
<h2><a class="anchor" id="autotoc_md80"></a>
Compile with debug info</h2>
<p>You need to compile your project with generation of debug symbols enabled, usually <code>-g</code> with clang++ and g++.</p>
<p>Note that you can use <code>-g</code> with any level of optimization, with modern debug information encoding like DWARF, it only takes space in the binary (it's not loaded in memory until your debugger or Backward makes use of it, don't worry), and it doesn't impact the code generation (at least on GNU/Linux x86_64 for what I know).</p>
<p>If you are missing debug information, the stack trace will lack details about your sources.</p>
<h2><a class="anchor" id="autotoc_md81"></a>
Libraries to read the debug info</h2>
<p>Backward supports pretty printed stack traces on GNU/Linux, macOS and Windows, it will compile fine under other platforms but will not do anything. <b>Pull requests are welcome :)</b></p>
<p>Also, by default you will get a really basic stack trace, based on the <code>backtrace_symbols</code> API:</p>
<p><img src="doc/nice.png" alt="default trace" class="inline"/></p>
<p>You will need to install some dependencies to get the ultimate stack trace. Three libraries are currently supported, the only difference is which one is the easiest for you to install, so pick your poison:</p>
<h3><a class="anchor" id="autotoc_md82"></a>
libbfd from the &lt;a href="http://www.gnu.org/software/binutils/"&gt;GNU/binutils&lt;/a&gt;</h3>
<pre class="fragment">apt-get install binutils-dev (or equivalent)
</pre><p>And do not forget to link with the lib: <code>g++/clang++ -lbfd -ldl ...</code></p>
<p>This library requires dynamic loading. Which is provided by the library <code>dl</code>. Hence why we also link with <code>-ldl</code>.</p>
<p>Then define the following before every inclusion of <code><a class="el" href="backward_8hpp_source.html">backward.hpp</a></code> (don't forget to update <code>backward.cpp</code> as well): </p><pre class="fragment">#define BACKWARD_HAS_BFD 1
</pre><h3><a class="anchor" id="autotoc_md83"></a>
libdw from the &lt;a href="https://fedorahosted.org/elfutils/"&gt;elfutils&lt;/a&gt;</h3>
<pre class="fragment">apt-get install libdw-dev (or equivalent)
</pre><p>And do not forget to link with the lib and inform Backward to use it: </p><pre class="fragment">#define BACKWARD_HAS_DW 1
</pre><p>Of course you can simply add the define (<code>-DBACKWARD_HAS_...=1</code>) and the linkage details in your build system and even auto-detect which library is installed, it's up to you.</p>
<h3><a class="anchor" id="autotoc_md84"></a>
&lt;a href="https://sourceforge.net/projects/libdwarf/"&gt;libdwarf&lt;/a&gt; and &lt;a href="http://www.mr511.de/software/english.html"&gt;libelf&lt;/a&gt;</h3>
<pre class="fragment">apt-get install libdwarf-dev (or equivalent)
</pre><p>And do not forget to link with the lib and inform Backward to use it: </p><pre class="fragment">#define BACKWARD_HAS_DWARF 1
</pre><p>There are several alternative implementations of libdwarf and libelf that are API compatible so it's possible, although it hasn't been tested, to replace the ones used when developing backward (in bold, below):</p>
<ul>
<li>**_libelf_** by <a href="http://www.mr511.de/software/english.html">Michael "Tired" Riepe</a></li>
<li>**_libdwarf_** by <a href="https://www.prevanders.net/dwarf.html">David Anderson</a></li>
<li>libelf from <a href="https://fedorahosted.org/elfutils/">elfutils</a></li>
<li>libelf and libdwarf from FreeBSD's <a href="https://sourceforge.net/p/elftoolchain/wiki/Home/">ELF Tool Chain</a> project</li>
</ul>
<p>Of course you can simply add the define (<code>-DBACKWARD_HAS_...=1</code>) and the linkage details in your build system and even auto-detect which library is installed, it's up to you.</p>
<p>That's it, you are all set, you should be getting nice stack traces like the one at the beginning of this document.</p>
<h1><a class="anchor" id="autotoc_md85"></a>
API</h1>
<p>If you don't want to limit yourself to the defaults offered by <code>backward.cpp</code>, and you want to take some random stack traces for whatever reason and pretty print them the way you love or you decide to send them all to your buddies over the Internet, you will appreciate the simplicity of Backward's API.</p>
<h2><a class="anchor" id="autotoc_md86"></a>
Stacktrace</h2>
<p>The StackTrace class lets you take a "snapshot" of the current stack. You can use it like this:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">using namespace backward;</div>
<div class="line">StackTrace st; st.load_here(32);</div>
<div class="line">Printer p; p.print(st);</div>
</div><!-- fragment --><p>The public methods are:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">class StackTrace { public:</div>
<div class="line">    // Take a snapshot of the current stack, with at most &quot;trace_cnt_max&quot;</div>
<div class="line">    // traces in it. The first trace is the most recent (ie the current</div>
<div class="line">    // frame). You can also provide a trace address to load_from() assuming</div>
<div class="line">    // the address is a valid stack frame (useful for signal handling traces).</div>
<div class="line">    // Both function return size().</div>
<div class="line">    size_t load_here(size_t trace_cnt_max)</div>
<div class="line">    size_t load_from(void* address, size_t trace_cnt_max)</div>
<div class="line"> </div>
<div class="line">    // The number of traces loaded. This can be less than &quot;trace_cnt_max&quot;.</div>
<div class="line">    size_t size() const</div>
<div class="line"> </div>
<div class="line">    // A unique id for the thread in which the trace was taken. The value</div>
<div class="line">    // 0 means the stack trace comes from the main thread.</div>
<div class="line">    size_t thread_id() const</div>
<div class="line"> </div>
<div class="line">    // Retrieve a trace by index. 0 is the most recent trace, size()-1 is</div>
<div class="line">    // the oldest one.</div>
<div class="line">    Trace operator[](size_t trace_idx)</div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md87"></a>
TraceResolver</h2>
<p>The <code>TraceResolver</code> does the heavy lifting, and intends to transform a simple <code>Trace</code> from its address into a fully detailed <code>ResolvedTrace</code> with the filename of the source, line numbers, inlined functions and so on.</p>
<p>You can use it like this:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">using namespace backward;</div>
<div class="line">StackTrace st; st.load_here(32);</div>
<div class="line"> </div>
<div class="line">TraceResolver tr; tr.load_stacktrace(st);</div>
<div class="line">for (size_t i = 0; i &lt; st.size(); ++i) {</div>
<div class="line">    ResolvedTrace trace = tr.resolve(st[i]);</div>
<div class="line">    std::cout &lt;&lt; &quot;#&quot; &lt;&lt; i</div>
<div class="line">        &lt;&lt; &quot; &quot; &lt;&lt; trace.object_filename</div>
<div class="line">        &lt;&lt; &quot; &quot; &lt;&lt; trace.object_function</div>
<div class="line">        &lt;&lt; &quot; [&quot; &lt;&lt; trace.addr &lt;&lt; &quot;]&quot;</div>
<div class="line">    &lt;&lt; std::endl;</div>
<div class="line">}</div>
</div><!-- fragment --><p>The public methods are:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">class TraceResolver { public:</div>
<div class="line">    // Pre-load whatever is necessary from the stack trace.</div>
<div class="line">    template &lt;class ST&gt;</div>
<div class="line">        void load_stacktrace(ST&amp;)</div>
<div class="line"> </div>
<div class="line">    // Resolve a trace. It takes a ResolvedTrace, because a `Trace` is</div>
<div class="line">    // implicitly convertible to it.</div>
<div class="line">    ResolvedTrace resolve(ResolvedTrace t)</div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md88"></a>
SnippetFactory</h2>
<p>The SnippetFactory is a simple helper class to automatically load and cache source files in order to extract code snippets.</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">class SnippetFactory { public:</div>
<div class="line">    // A snippet is a list of line numbers and line contents.</div>
<div class="line">    typedef std::vector&lt;std::pair&lt;size_t, std::string&gt; &gt; lines_t;</div>
<div class="line"> </div>
<div class="line">    // Return a snippet starting at line_start with up to context_size lines.</div>
<div class="line">    lines_t get_snippet(const std::string&amp; filename,</div>
<div class="line">            size_t line_start, size_t context_size)</div>
<div class="line"> </div>
<div class="line">    // Return a combined snippet from two different locations and combine them.</div>
<div class="line">    // context_size / 2 lines will be extracted from each location.</div>
<div class="line">    lines_t get_combined_snippet(</div>
<div class="line">            const std::string&amp; filename_a, size_t line_a,</div>
<div class="line">            const std::string&amp; filename_b, size_t line_b,</div>
<div class="line">            size_t context_size)</div>
<div class="line"> </div>
<div class="line">    // Tries to return a unified snippet if the two locations from the same</div>
<div class="line">    // file are close enough to fit inside one context_size, else returns</div>
<div class="line">    // the equivalent of get_combined_snippet().</div>
<div class="line">    lines_t get_coalesced_snippet(const std::string&amp; filename,</div>
<div class="line">            size_t line_a, size_t line_b, size_t context_size)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md89"></a>
Printer</h2>
<p>A simpler way to pretty print a stack trace to the terminal. It will automatically resolve the traces for you:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">using namespace backward;</div>
<div class="line">StackTrace st; st.load_here(32);</div>
<div class="line">Printer p;</div>
<div class="line">p.object = true;</div>
<div class="line">p.color_mode = ColorMode::always;</div>
<div class="line">p.address = true;</div>
<div class="line">p.print(st, stderr);</div>
</div><!-- fragment --><p>You can set a few options:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">class Printer { public:</div>
<div class="line">    // Print a little snippet of code if possible.</div>
<div class="line">    bool snippet = true;</div>
<div class="line"> </div>
<div class="line">    // Colorize the trace</div>
<div class="line">    //  - ColorMode::automatic: Activate colors if possible. For example, when using a TTY on linux.</div>
<div class="line">    //  - ColorMode::always: Always use colors.</div>
<div class="line">    //  - ColorMode::never: Never use colors.</div>
<div class="line">    bool color_mode = ColorMode::automatic;</div>
<div class="line"> </div>
<div class="line">    // Add the addresses of every source location to the trace.</div>
<div class="line">    bool address = false;</div>
<div class="line"> </div>
<div class="line">    // Even if there is a source location, also prints the object</div>
<div class="line">    // from where the trace came from.</div>
<div class="line">    bool object = false;</div>
<div class="line"> </div>
<div class="line">    // Resolve and print a stack trace to the given C FILE* object.</div>
<div class="line">    // On linux, if the FILE* object is attached to a TTY,</div>
<div class="line">    // color will be used if color_mode is set to automatic.</div>
<div class="line">    template &lt;typename StackTrace&gt;</div>
<div class="line">        FILE* print(StackTrace&amp; st, FILE* fp = stderr);</div>
<div class="line"> </div>
<div class="line">    // Resolve and print a stack trace to the given std::ostream object.</div>
<div class="line">    // Color will only be used if color_mode is set to always. </div>
<div class="line">    template &lt;typename ST&gt;</div>
<div class="line">        std::ostream&amp; print(ST&amp; st, std::ostream&amp; os);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md90"></a>
SignalHandling</h2>
<p>A simple helper class that registers for you the most common signals and other callbacks to segfault, hardware exception, un-handled exception etc.</p>
<p><code>backward.cpp</code> simply uses it like that:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">backward::SignalHandling sh;</div>
</div><!-- fragment --><p>Creating the object registers all the different signals and hooks. Destroying this object doesn't do anything. It exposes only one method:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">bool loaded() const // true if loaded with success</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md91"></a>
Trace object</h2>
<p>To keep the memory footprint of a loaded <code>StackTrace</code> on the low-side, there a hierarchy of trace object, from a minimal <code>Trace</code>to a <code>ResolvedTrace</code>.</p>
<h3><a class="anchor" id="autotoc_md92"></a>
Simple trace</h3>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">struct Trace {</div>
<div class="line">    void*  addr; // address of the trace</div>
<div class="line">    size_t idx;  // its index (0 == most recent)</div>
<div class="line">};</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md93"></a>
Resolved trace</h3>
<p>A <code>ResolvedTrace</code> should contains a maximum of details about the location of the trace in the source code. Note that not all fields might be set.</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">struct ResolvedTrace: public Trace {</div>
<div class="line"> </div>
<div class="line">    struct SourceLoc {</div>
<div class="line">        std::string function;</div>
<div class="line">        std::string filename;</div>
<div class="line">        size_t      line;</div>
<div class="line">        size_t      col;</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    // In which binary object this trace is located.</div>
<div class="line">    std::string                    object_filename;</div>
<div class="line"> </div>
<div class="line">    // The function in the object that contains the trace. This is not the same</div>
<div class="line">    // as source.function which can be an function inlined in object_function.</div>
<div class="line">    std::string                    object_function;</div>
<div class="line"> </div>
<div class="line">    // The source location of this trace. It is possible for filename to be</div>
<div class="line">    // empty and for line/col to be invalid (value 0) if this information</div>
<div class="line">    // couldn&#39;t be deduced, for example if there is no debug information in the</div>
<div class="line">    // binary object.</div>
<div class="line">    SourceLoc                      source;</div>
<div class="line"> </div>
<div class="line">    // An optional list of &quot;inliners&quot;. All of these sources locations where</div>
<div class="line">    // inlined in the source location of the trace (the attribute right above).</div>
<div class="line">    // This is especially useful when you compile with optimizations turned on.</div>
<div class="line">    typedef std::vector&lt;SourceLoc&gt; source_locs_t;</div>
<div class="line">    source_locs_t                  inliners;</div>
<div class="line">};</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md94"></a>
Contact and copyright</h1>
<p>François-Xavier Bourlet <a href="#" onclick="location.href='mai'+'lto:'+'bom'+'be'+'la@'+'gm'+'ail'+'.c'+'om'; return false;">bombe<span style="display: none;">.nosp@m.</span>la@g<span style="display: none;">.nosp@m.</span>mail.<span style="display: none;">.nosp@m.</span>com</a></p>
<p>Copyright 2013-2017 Google Inc. All Rights Reserved. MIT License.</p>
<h2><a class="anchor" id="autotoc_md95"></a>
Disclaimer</h2>
<p>Although this project is owned by Google Inc. this is not a Google supported or affiliated project. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
